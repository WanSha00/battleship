(()=>{"use strict";const e=document.querySelector("#gamesboard-container"),t=10;function o(o,n){let s;s="player"===n?"PLAYER":"COMPUTER";const r=document.createElement("div");r.classList.add("board");const a=document.createElement("div");a.classList.add("board-title");const l=document.createElement("div");l.textContent=s;const c=document.createElement("div");c.classList.add("game-board"),c.style.backgroundColor=o,c.id=n;for(let e=0;e<t*t;e++){const t=document.createElement("div");t.classList.add("block"),t.id=e,c.append(t)}a.append(l),r.append(a),r.append(c),e.append(r)}function n(e,o,n,s){let r,a=o?n<=t*t-s.length?n:t*t-s.length:n<=t*t-t*s.length?n:n-s.length*t+t,l=[];for(let n=0;n<s.length;n++)o?l.push(e[Number(a)+n]):l.push(e[Number(a)+n*t]);o?l.every(((e,o)=>r=l[0].id%t!=t-(l.length-(o+1)))):l.every(((e,o)=>r=l[0].id<t*o+1+90));const c=l.every((e=>!e.classList.contains("taken")));return{shipBlocks:l,valid:r,notTaken:c}}function s(e,t){let o=!1;return e.forEach((e=>{e===t&&(o=!0)})),o}const r=document.querySelector(".option-container"),a=document.querySelector("#flip-button"),l=document.querySelector("#start-button"),c=document.querySelector("#info-display"),i=document.querySelector("#turn-display"),u=document.querySelector(".setup");let d=[],p=0;a.addEventListener("click",(function(){const e=Array.from(r.children);p=0===p?90:0,e.forEach((e=>e.style.transform=`rotate(${p}deg)`))}));const m=10;o("hsl(200, 100%, 50%)","player"),o("hsl(200, 100%, 40%","computer");class h{constructor(e,t){this.name=e,this.length=t}}const f=[new h("destroyer",2),new h("submarine",3),new h("cruiser",3),new h("battleship",4),new h("carrier",5)];let y,C;function g(e,t,o){if(!1===s(d,t)){console.log("current user : "+e);const s=document.querySelectorAll(`#${e} div`);let r=Math.random()<.5,a="player"===e?0===p:r,l=Math.floor(Math.random()*m*m),c=o||l;const{shipBlocks:i,valid:u,notTaken:d}=n(s,a,c,t);u&&d?(i.forEach((e=>{e.classList.add(t.name),e.classList.add("taken")})),console.log("add "+t.name+" to "+e)):(console.log("block not valid for user: "+e),"computer"===e?(console.log("retry add "+t.name+" for computer"),g(e,t)):y=!0)}}function L(e){y=!1,C=e.target}function v(e){e.preventDefault();const t=f[C.id];!function(e,t){if(!1===s(d,t)){const o=document.querySelectorAll("#player div");let s=0===p;const{shipBlocks:r,valid:a,notTaken:l}=n(o,s,e,t);a&&l&&r.forEach((e=>{e.classList.add("hover"),setTimeout((()=>e.classList.remove("hover")),500)}))}}(e.target.id,t)}function k(e){const t=e.target.id,o=f[C.id];g("player",o,t),y||(C.remove(),d.push(o))}f.forEach((e=>g("computer",e))),Array.from(r.children).forEach((e=>{e.addEventListener("dragstart",L)})),document.querySelectorAll("#player div").forEach((e=>{e.addEventListener("dragover",v),e.addEventListener("drop",k)}));let E,b=!1;l.addEventListener("click",(function(){if(console.log("start"),void 0===E)if(0!=r.children.length)console.log("please place all ships"),c.textContent="Please place all your ships on the PLAYER board.";else{u.style.display="none",l.style.display="none";const e=document.querySelector(".player-ships-info"),t=document.querySelector(".cpu-ships-info");e.textContent="Player's ships: Destroyer | Submarine | Cruiser | Battleship | Carrier",t.textContent="Computer's ships: Destroyer | Submarine | Cruiser | Battleship | Carrier",document.querySelectorAll("#computer div").forEach((e=>e.addEventListener("click",T))),E=!0,i.textContent="PLAYER's turn",c.textContent="You are attacking...."}}));let S=[],x=[];const q=[],A=[];function T(e){if(!b){if(e.target.classList.contains("taken")&&!e.target.classList.contains("boom")){e.target.classList.add("boom"),c.textContent="You HIT a ship!";let t=Array.from(e.target.classList);t=t.filter((e=>"block"!=e)),t=t.filter((e=>"boom"!=e)),t=t.filter((e=>"taken"!=e)),S.push(...t),D("player",S,q)}else e.target.classList.contains("taken")?(e.target.classList.contains("taken")&&e.target.classList.contains("boom")||e.target.classList.contains("miss"))&&(c.textContent="You attacked the same spot. You wasted your turn!"):(c.textContent="You MISSED!",e.target.classList.add("miss"));E=!1,document.querySelectorAll("#computer div").forEach((e=>e.removeEventListener("click",T))),setTimeout(Y,2e3)}}function Y(){b||(i.textContent="COMPUTER's turn",c.textContent="Computer is attacking....",setTimeout((()=>{let e=Math.floor(Math.random()*m*m);const t=document.querySelectorAll("#player div");if(t[e].classList.contains("taken")&&t[e].classList.contains("boom"))Y();else if(t[e].classList.contains("taken")&&!t[e].classList.contains("boom")){t[e].classList.add("boom"),c.textContent="The computer HIT your ship!";let o=Array.from(t[e].classList);o=o.filter((e=>"block"!=e)),o=o.filter((e=>"boom"!=e)),o=o.filter((e=>"taken"!=e)),x.push(...o),D("computer",x,A)}else c.textContent="The computer MISSED!",t[e].classList.add("miss")}),2e3),setTimeout((()=>{E=!0,i.textContent="PLAYER's turn",c.textContent="You are attacking....",document.querySelectorAll("#computer div").forEach((e=>e.addEventListener("click",T)))}),4e3))}const P=document.querySelector(".player-ships-info"),U=document.querySelector(".cpu-ships-info");let M=["Destroyer","Submarine","Cruiser","Battleship","Carrier"],B=["Destroyer","Submarine","Cruiser","Battleship","Carrier"];function D(e,t,o){function n(n,s){if(t.filter((e=>e===n)).length===s){if("player"===e){c.textContent=`The player SUNK the computer's ${n.toUpperCase()}!`;let e="";for(let t=0;t<M.length;t++)if(void 0!==M[t]){let o=!1;M[t].toUpperCase()===n.toUpperCase()&&(o=!0,delete M[t]),o||(e+=M[t]+" | ")}U.textContent="Computer ships: "+e,S=t.filter((e=>e!==n))}if("computer"===e){c.textContent=`The computer SUNK the player's ${n.toUpperCase()}!`;let e="";for(let t=0;t<B.length;t++)if(void 0!==B[t]){let o=!1;B[t].toUpperCase()===n.toUpperCase()&&(o=!0,delete B[t]),o||(e+=B[t]+" | ")}P.textContent="Player ships: "+e,x=t.filter((e=>e!==n))}o.push(n)}}n("destroyer",2),n("submarine",3),n("cruiser",3),n("battleship",4),n("carrier",5),console.log("player sunked ships "+q),console.log("cpu sunked ships "+A),5===q.length&&(c.textContent="You have sunk all the computer's ship. You WON!!",b=!0),5===A.length&&(c.textContent="Computer has sunk all the player's ship. You LOSE!!",b=!0)}c.textContent="Please place all your ships on the PLAYER board."})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UixRQUNyQlksR0FBbUJBLElBQW1CRixHQUUzQyxDQUVBRCxFQUFjN0UsS0FBSzhFLEVBQ3JCLENBQ0YsQ0FFQXBFLEVBQVUsWUFBYSxHQUN2QkEsRUFBVSxZQUFhLEdBQ3ZCQSxFQUFVLFVBQVcsR0FDckJBLEVBQVUsYUFBYyxHQUN4QkEsRUFBVSxVQUFXLEdBRXJCMkIsUUFBUUMsSUFBSSx1QkFBeUIyQixHQUNyQzVCLFFBQVFDLElBQUksb0JBQXNCNEIsR0FFSCxJQUEzQkQsRUFBZ0JuRSxTQUNsQm1CLEVBQVlsQyxZQUNWLG1EQUNGMEUsR0FBVyxHQUdvQixJQUE3QlMsRUFBa0JwRSxTQUNwQm1CLEVBQVlsQyxZQUNWLHNEQUNGMEUsR0FBVyxFQUVmLENBRUF4QyxFQUFZbEMsWUFBYyxrRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9nYW1lQm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVzQm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVzYm9hcmQtY29udGFpbmVyXCIpO1xuY29uc3Qgd2lkdGggPSAxMDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJvYXJkKGNvbG9yLCB1c2VyKSB7XG4gIGxldCBuYW1lO1xuICB1c2VyID09PSBcInBsYXllclwiID8gKG5hbWUgPSBcIlBMQVlFUlwiKSA6IChuYW1lID0gXCJDT01QVVRFUlwiKTtcblxuICBjb25zdCBib2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJvYXJkLmNsYXNzTGlzdC5hZGQoXCJib2FyZFwiKTtcblxuICBjb25zdCBib2FyZFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYm9hcmRUaXRsZS5jbGFzc0xpc3QuYWRkKFwiYm9hcmQtdGl0bGVcIik7XG5cbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgY29uc3QgZ2FtZUJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZ2FtZUJvYXJkQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJnYW1lLWJvYXJkXCIpO1xuICBnYW1lQm9hcmRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG4gIGdhbWVCb2FyZENvbnRhaW5lci5pZCA9IHVzZXI7XG5cbiAgLy9jcmVhdGUgMTB4MTAgYmxvY2tzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkdGggKiB3aWR0aDsgaSsrKSB7XG4gICAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoXCJibG9ja1wiKTtcbiAgICBibG9jay5pZCA9IGk7XG5cbiAgICBnYW1lQm9hcmRDb250YWluZXIuYXBwZW5kKGJsb2NrKTtcbiAgfVxuXG4gIGJvYXJkVGl0bGUuYXBwZW5kKHRpdGxlKTtcbiAgYm9hcmQuYXBwZW5kKGJvYXJkVGl0bGUpO1xuICBib2FyZC5hcHBlbmQoZ2FtZUJvYXJkQ29udGFpbmVyKTtcbiAgZ2FtZXNCb2FyZENvbnRhaW5lci5hcHBlbmQoYm9hcmQpO1xuICBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbGlkaXR5KGFsbEJvYXJkQmxvY2tzLCBpc0hvcml6b250YWwsIHN0YXJ0SW5kZXgsIHNoaXApIHtcbiAgICBsZXQgdmFsaWRTdGFydEluZGV4ID0gaXNIb3Jpem9udGFsXG4gICAgICA/IHN0YXJ0SW5kZXggPD0gd2lkdGggKiB3aWR0aCAtIHNoaXAubGVuZ3RoXG4gICAgICAgID8gc3RhcnRJbmRleFxuICAgICAgICA6IHdpZHRoICogd2lkdGggLSBzaGlwLmxlbmd0aFxuICAgICAgOiAvL25vdCBob3Jpem9udGFsXG4gICAgICBzdGFydEluZGV4IDw9IHdpZHRoICogd2lkdGggLSB3aWR0aCAqIHNoaXAubGVuZ3RoXG4gICAgICA/IHN0YXJ0SW5kZXhcbiAgICAgIDogc3RhcnRJbmRleCAtIHNoaXAubGVuZ3RoICogd2lkdGggKyB3aWR0aDtcbiAgXG4gICAgbGV0IHNoaXBCbG9ja3MgPSBbXTtcbiAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvL3N0YXJ0IGZyb20gYmxvY2sgc3RhcnQgaW5kZXggdG8gYWRqYWNlbnQgYmxvY2tzIHRvIHRoZSByaWdodFxuICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICBzaGlwQmxvY2tzLnB1c2goYWxsQm9hcmRCbG9ja3NbTnVtYmVyKHZhbGlkU3RhcnRJbmRleCkgKyBpXSk7XG4gIFxuICAgICAgICAvL3ZlcnRpY2FsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaGlwQmxvY2tzLnB1c2goYWxsQm9hcmRCbG9ja3NbTnVtYmVyKHZhbGlkU3RhcnRJbmRleCkgKyBpICogd2lkdGhdKTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIC8vY2hlY2sgaWYgdmFsaWQgdG8gcHV0IHdob2xlIHNoaXAgaW4gb25lIGxpbmUgaG9yaXpvbnRhbC92ZXJ0aWNhbCB3aXRob3V0IHdyYXBwaW5nXG4gICAgbGV0IHZhbGlkO1xuICBcbiAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICBzaGlwQmxvY2tzLmV2ZXJ5KFxuICAgICAgICAoX3NoaXBCbG9jaywgaW5kZXgpID0+XG4gICAgICAgICAgKHZhbGlkID1cbiAgICAgICAgICAgIHNoaXBCbG9ja3NbMF0uaWQgJSB3aWR0aCAhPT1cbiAgICAgICAgICAgIHdpZHRoIC0gKHNoaXBCbG9ja3MubGVuZ3RoIC0gKGluZGV4ICsgMSkpKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hpcEJsb2Nrcy5ldmVyeShcbiAgICAgICAgKF9zaGlwQmxvY2ssIGluZGV4KSA9PlxuICAgICAgICAgICh2YWxpZCA9IHNoaXBCbG9ja3NbMF0uaWQgPCA5MCArICh3aWR0aCAqIGluZGV4ICsgMSkpXG4gICAgICApO1xuICAgIH1cbiAgXG4gICAgLy9jaGVjayB0aGUgYmxvY2sgaXMgbm90IHRha2VuXG4gICAgY29uc3Qgbm90VGFrZW4gPSBzaGlwQmxvY2tzLmV2ZXJ5KFxuICAgICAgKHNoaXBCbG9jaykgPT4gIXNoaXBCbG9jay5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YWtlblwiKVxuICAgICk7XG4gIFxuICAgIHJldHVybiB7XG4gICAgICBzaGlwQmxvY2tzLFxuICAgICAgdmFsaWQsXG4gICAgICBub3RUYWtlbixcbiAgICB9O1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGlzU2hpcERyb3BwcGVkKGRyb3BwZWRTaGlwcywgY2hlY2tTaGlwKXtcblxuICAgIGxldCBub3RBZGQgPSBmYWxzZTtcblxuICAgIGRyb3BwZWRTaGlwcy5mb3JFYWNoKChkcm9wc2hpcCkgPT4ge1xuICAgICAgICBpZiAoZHJvcHNoaXAgPT09IGNoZWNrU2hpcCkge1xuICAgICAgICAgIG5vdEFkZCA9ICB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5vdEFkZDtcblxuICB9IiwiaW1wb3J0IHsgY3JlYXRlQm9hcmQsIGdldFZhbGlkaXR5LCBpc1NoaXBEcm9wcHBlZCB9IGZyb20gXCIuL2dhbWVCb2FyZFwiO1xuXG5jb25zdCBvcHRpb25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wdGlvbi1jb250YWluZXJcIik7XG5jb25zdCBmbGlwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmbGlwLWJ1dHRvblwiKTtcbmNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGFydC1idXR0b25cIik7XG5jb25zdCBpbmZvRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5mby1kaXNwbGF5XCIpO1xuY29uc3QgdHVybkRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3R1cm4tZGlzcGxheVwiKTtcbmNvbnN0IHNldHVwRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0dXBcIik7XG5cbmxldCBkcm9wcGVkID0gW107XG5cbi8vZmxpcCBzaGlwc1xubGV0IGFuZ2xlID0gMDtcbmZ1bmN0aW9uIGZsaXAoKSB7XG4gIGNvbnN0IG9wdGlvblNoaXBzID0gQXJyYXkuZnJvbShvcHRpb25Db250YWluZXIuY2hpbGRyZW4pO1xuXG4gIGFuZ2xlID0gYW5nbGUgPT09IDAgPyA5MCA6IDA7XG4gIG9wdGlvblNoaXBzLmZvckVhY2goXG4gICAgKG9wdGlvblNoaXApID0+IChvcHRpb25TaGlwLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGUoJHthbmdsZX1kZWcpYClcbiAgKTtcbn1cblxuZmxpcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZmxpcCk7XG5cbmNvbnN0IHdpZHRoID0gMTA7XG5cbmNyZWF0ZUJvYXJkKFwiaHNsKDIwMCwgMTAwJSwgNTAlKVwiLCBcInBsYXllclwiKTtcbmNyZWF0ZUJvYXJkKFwiaHNsKDIwMCwgMTAwJSwgNDAlXCIsIFwiY29tcHV0ZXJcIik7XG5cbmNsYXNzIFNoaXAge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBsZW5ndGgpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICB9XG5cbn1cblxuY29uc3QgZGVzdHJveWVyID0gbmV3IFNoaXAoXCJkZXN0cm95ZXJcIiwgMik7XG5jb25zdCBzdWJtYXJpbmUgPSBuZXcgU2hpcChcInN1Ym1hcmluZVwiLCAzKTtcbmNvbnN0IGNydWlzZXIgPSBuZXcgU2hpcChcImNydWlzZXJcIiwgMyk7XG5jb25zdCBiYXR0bGVzaGlwID0gbmV3IFNoaXAoXCJiYXR0bGVzaGlwXCIsIDQpO1xuY29uc3QgY2FycmllciA9IG5ldyBTaGlwKFwiY2FycmllclwiLCA1KTtcblxuY29uc3Qgc2hpcHMgPSBbZGVzdHJveWVyLCBzdWJtYXJpbmUsIGNydWlzZXIsIGJhdHRsZXNoaXAsIGNhcnJpZXJdO1xubGV0IG5vdERyb3BwZWQ7XG5cbmZ1bmN0aW9uIGFkZFNoaXBQaWVjZSh1c2VyLCBzaGlwLCBzdGFydElkKSB7XG5cbiAgbGV0IG5vdEFkZCA9IGlzU2hpcERyb3BwcGVkKGRyb3BwZWQsIHNoaXApO1xuXG4gIGlmIChub3RBZGQgPT09IGZhbHNlKSB7XG4gICAgY29uc29sZS5sb2coXCJjdXJyZW50IHVzZXIgOiBcIiArIHVzZXIpO1xuXG4gICAgY29uc3QgYWxsQm9hcmRCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHt1c2VyfSBkaXZgKTtcbiAgICBcblxuICAgIGxldCByYW5kb21Cb29sZWFuID0gTWF0aC5yYW5kb20oKSA8IDAuNTtcbiAgICBsZXQgaXNIb3Jpem9udGFsID0gdXNlciA9PT0gXCJwbGF5ZXJcIiA/IGFuZ2xlID09PSAwIDogcmFuZG9tQm9vbGVhbjtcbiAgICBsZXQgcmFuZG9tU3RhcnRJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpZHRoICogd2lkdGgpO1xuXG4gICAgbGV0IHN0YXJ0SW5kZXggPSBzdGFydElkID8gc3RhcnRJZCA6IHJhbmRvbVN0YXJ0SW5kZXg7XG5cbiAgICBjb25zdCB7IHNoaXBCbG9ja3MsIHZhbGlkLCBub3RUYWtlbiB9ID0gZ2V0VmFsaWRpdHkoXG4gICAgICBhbGxCb2FyZEJsb2NrcyxcbiAgICAgIGlzSG9yaXpvbnRhbCxcbiAgICAgIHN0YXJ0SW5kZXgsXG4gICAgICBzaGlwXG4gICAgKTtcblxuICAgIGlmICh2YWxpZCAmJiBub3RUYWtlbikge1xuICAgICAgc2hpcEJsb2Nrcy5mb3JFYWNoKChzaGlwQmxvY2spID0+IHtcbiAgICAgICAgc2hpcEJsb2NrLmNsYXNzTGlzdC5hZGQoc2hpcC5uYW1lKTtcbiAgICAgICAgc2hpcEJsb2NrLmNsYXNzTGlzdC5hZGQoXCJ0YWtlblwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhcImFkZCBcIiArIHNoaXAubmFtZSArIFwiIHRvIFwiICsgdXNlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiYmxvY2sgbm90IHZhbGlkIGZvciB1c2VyOiBcIiArIHVzZXIpO1xuXG4gICAgICBpZiAodXNlciA9PT0gXCJjb21wdXRlclwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmV0cnkgYWRkIFwiICsgc2hpcC5uYW1lICsgXCIgZm9yIGNvbXB1dGVyXCIpO1xuICAgICAgICBhZGRTaGlwUGllY2UodXNlciwgc2hpcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3REcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4gYWRkU2hpcFBpZWNlKFwiY29tcHV0ZXJcIiwgc2hpcCkpO1xuXG4vL2RyYWcgc2hpcHNcbmxldCBkcmFnZ2VkU2hpcDtcblxuY29uc3Qgb3B0aW9uU2hpcHMgPSBBcnJheS5mcm9tKG9wdGlvbkNvbnRhaW5lci5jaGlsZHJlbik7XG5vcHRpb25TaGlwcy5mb3JFYWNoKChvcHRpb25TaGlwKSA9PiB7XG4gIG9wdGlvblNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBkcmFnU3RhcnQpO1xufSk7XG5cbmNvbnN0IGFsbFBsYXllckJsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjcGxheWVyIGRpdlwiKTtcbmFsbFBsYXllckJsb2Nrcy5mb3JFYWNoKChwbGF5ZXJCbG9jaykgPT4ge1xuICBwbGF5ZXJCbG9jay5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgZHJhZ092ZXIpO1xuICBwbGF5ZXJCbG9jay5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBkcm9wU2hpcCk7XG59KTtcblxuZnVuY3Rpb24gZHJhZ1N0YXJ0KGUpIHtcbiAgbm90RHJvcHBlZCA9IGZhbHNlO1xuICBkcmFnZ2VkU2hpcCA9IGUudGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBkcmFnT3ZlcihlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc2hpcCA9IHNoaXBzW2RyYWdnZWRTaGlwLmlkXTtcbiAgaGlnaGxpZ2h0QXJlYShlLnRhcmdldC5pZCwgc2hpcCk7XG59XG5cbmZ1bmN0aW9uIGRyb3BTaGlwKGUpIHtcbiAgY29uc3Qgc3RhcnRJZCA9IGUudGFyZ2V0LmlkO1xuICBjb25zdCBzaGlwID0gc2hpcHNbZHJhZ2dlZFNoaXAuaWRdO1xuICBhZGRTaGlwUGllY2UoXCJwbGF5ZXJcIiwgc2hpcCwgc3RhcnRJZCk7XG5cbiAgaWYgKCFub3REcm9wcGVkKSB7XG4gICAgZHJhZ2dlZFNoaXAucmVtb3ZlKCk7XG4gICAgZHJvcHBlZC5wdXNoKHNoaXApO1xuICB9XG59XG5cbi8vYWRkIGhpZ2hsaWdodFxuZnVuY3Rpb24gaGlnaGxpZ2h0QXJlYShzdGFydEluZGV4LCBzaGlwKSB7XG5cbiAgbGV0IG5vdEFkZCA9IGlzU2hpcERyb3BwcGVkKGRyb3BwZWQsIHNoaXApO1xuXG4gIGlmIChub3RBZGQgPT09IGZhbHNlKSB7XG4gICAgY29uc3QgYWxsUGxheWVyQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNwbGF5ZXIgZGl2XCIpO1xuICAgIGxldCBpc0hvcml6b250YWwgPSBhbmdsZSA9PT0gMDtcblxuICAgIGNvbnN0IHsgc2hpcEJsb2NrcywgdmFsaWQsIG5vdFRha2VuIH0gPSBnZXRWYWxpZGl0eShcbiAgICAgIGFsbFBsYXllckJsb2NrcyxcbiAgICAgIGlzSG9yaXpvbnRhbCxcbiAgICAgIHN0YXJ0SW5kZXgsXG4gICAgICBzaGlwXG4gICAgKTtcblxuICAgIGlmICh2YWxpZCAmJiBub3RUYWtlbikge1xuICAgICAgc2hpcEJsb2Nrcy5mb3JFYWNoKChzaGlwQmxvY2spID0+IHtcbiAgICAgICAgc2hpcEJsb2NrLmNsYXNzTGlzdC5hZGQoXCJob3ZlclwiKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzaGlwQmxvY2suY2xhc3NMaXN0LnJlbW92ZShcImhvdmVyXCIpLCA1MDApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmxldCBnYW1lT3ZlciA9IGZhbHNlO1xubGV0IHBsYXllclR1cm47XG5cbi8vc3RhcnQgZ2FtZSB3aGVuIGFsbCBzaGlwcyBvbiBib2FyZFxuZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xuICBjb25zb2xlLmxvZyhcInN0YXJ0XCIpO1xuXG4gIGlmIChwbGF5ZXJUdXJuID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAob3B0aW9uQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCAhPSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInBsZWFzZSBwbGFjZSBhbGwgc2hpcHNcIik7XG5cbiAgICAgIGluZm9EaXNwbGF5LnRleHRDb250ZW50ID1cbiAgICAgICAgXCJQbGVhc2UgcGxhY2UgYWxsIHlvdXIgc2hpcHMgb24gdGhlIFBMQVlFUiBib2FyZC5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0dXBEaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIHN0YXJ0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgY29uc3QgcGxheWVyU2hpcHNJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItc2hpcHMtaW5mb1wiKTtcbiAgICAgIGNvbnN0IGNwdVNoaXBJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcHUtc2hpcHMtaW5mb1wiKTtcblxuICAgICAgcGxheWVyU2hpcHNJbmZvLnRleHRDb250ZW50ID1cbiAgICAgICAgXCJQbGF5ZXIncyBzaGlwczogRGVzdHJveWVyIHwgU3VibWFyaW5lIHwgQ3J1aXNlciB8IEJhdHRsZXNoaXAgfCBDYXJyaWVyXCI7XG4gICAgICBjcHVTaGlwSW5mby50ZXh0Q29udGVudCA9XG4gICAgICAgIFwiQ29tcHV0ZXIncyBzaGlwczogRGVzdHJveWVyIHwgU3VibWFyaW5lIHwgQ3J1aXNlciB8IEJhdHRsZXNoaXAgfCBDYXJyaWVyXCI7XG5cbiAgICAgIGNvbnN0IGFsbEJvYXJkQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNjb21wdXRlciBkaXZcIik7XG4gICAgICBhbGxCb2FyZEJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT5cbiAgICAgICAgYmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrKVxuICAgICAgKTtcblxuICAgICAgcGxheWVyVHVybiA9IHRydWU7XG4gICAgICB0dXJuRGlzcGxheS50ZXh0Q29udGVudCA9IFwiUExBWUVSJ3MgdHVyblwiO1xuICAgICAgaW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBcIllvdSBhcmUgYXR0YWNraW5nLi4uLlwiO1xuICAgIH1cbiAgfVxufVxuXG5zdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RhcnRHYW1lKTtcblxubGV0IHBsYXllckhpdHMgPSBbXTtcbmxldCBjb21wdXRlckhpdHMgPSBbXTtcbmNvbnN0IHBsYXllclN1bmtTaGlwcyA9IFtdO1xuY29uc3QgY29tcHV0ZXJTdW5rU2hpcHMgPSBbXTtcblxuZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICBpZiAoIWdhbWVPdmVyKSB7XG4gICAgLy9pZiB0YXJnZXQgaXMgYSBzaGlwIGJsb2NrXG4gICAgaWYgKFxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFrZW5cIikgJiZcbiAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJib29tXCIpXG4gICAgKSB7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9vbVwiKTtcbiAgICAgIGluZm9EaXNwbGF5LnRleHRDb250ZW50ID0gXCJZb3UgSElUIGEgc2hpcCFcIjtcbiAgICAgIGxldCBjbGFzc2VzID0gQXJyYXkuZnJvbShlLnRhcmdldC5jbGFzc0xpc3QpO1xuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMuZmlsdGVyKChjbGFzc05hbWUpID0+IGNsYXNzTmFtZSAhPSBcImJsb2NrXCIpO1xuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMuZmlsdGVyKChjbGFzc05hbWUpID0+IGNsYXNzTmFtZSAhPSBcImJvb21cIik7XG4gICAgICBjbGFzc2VzID0gY2xhc3Nlcy5maWx0ZXIoKGNsYXNzTmFtZSkgPT4gY2xhc3NOYW1lICE9IFwidGFrZW5cIik7XG4gICAgICBwbGF5ZXJIaXRzLnB1c2goLi4uY2xhc3Nlcyk7XG5cbiAgICAgIGNoZWNrU2NvcmUoXCJwbGF5ZXJcIiwgcGxheWVySGl0cywgcGxheWVyU3Vua1NoaXBzKTtcbiAgICB9IGVsc2UgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YWtlblwiKSkge1xuICAgICAgaW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBcIllvdSBNSVNTRUQhXCI7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRha2VuXCIpICYmXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJvb21cIikpIHx8XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtaXNzXCIpXG4gICAgKSB7XG4gICAgICBpbmZvRGlzcGxheS50ZXh0Q29udGVudCA9XG4gICAgICAgIFwiWW91IGF0dGFja2VkIHRoZSBzYW1lIHNwb3QuIFlvdSB3YXN0ZWQgeW91ciB0dXJuIVwiO1xuICAgIH1cblxuICAgIHBsYXllclR1cm4gPSBmYWxzZTtcblxuICAgIGNvbnN0IGFsbEJvYXJkQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNjb21wdXRlciBkaXZcIik7XG4gICAgYWxsQm9hcmRCbG9ja3MuZm9yRWFjaCgoYmxvY2spID0+XG4gICAgICBibG9jay5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2spXG4gICAgKTtcbiAgICBzZXRUaW1lb3V0KGNvbXB1dGVyR28sIDIwMDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVyR28oKSB7XG4gIGlmICghZ2FtZU92ZXIpIHtcbiAgICB0dXJuRGlzcGxheS50ZXh0Q29udGVudCA9IFwiQ09NUFVURVIncyB0dXJuXCI7XG4gICAgaW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBcIkNvbXB1dGVyIGlzIGF0dGFja2luZy4uLi5cIjtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8wLTk5XG4gICAgICBsZXQgcmFuZG9tR28gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aWR0aCAqIHdpZHRoKTtcbiAgICAgIGNvbnN0IGFsbEJvYXJkQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNwbGF5ZXIgZGl2XCIpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGFsbEJvYXJkQmxvY2tzW3JhbmRvbUdvXS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YWtlblwiKSAmJlxuICAgICAgICBhbGxCb2FyZEJsb2Nrc1tyYW5kb21Hb10uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYm9vbVwiKVxuICAgICAgKSB7XG4gICAgICAgIGNvbXB1dGVyR28oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgYWxsQm9hcmRCbG9ja3NbcmFuZG9tR29dLmNsYXNzTGlzdC5jb250YWlucyhcInRha2VuXCIpICYmXG4gICAgICAgICFhbGxCb2FyZEJsb2Nrc1tyYW5kb21Hb10uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYm9vbVwiKVxuICAgICAgKSB7XG4gICAgICAgIGFsbEJvYXJkQmxvY2tzW3JhbmRvbUdvXS5jbGFzc0xpc3QuYWRkKFwiYm9vbVwiKTtcbiAgICAgICAgaW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBcIlRoZSBjb21wdXRlciBISVQgeW91ciBzaGlwIVwiO1xuXG4gICAgICAgIGxldCBjbGFzc2VzID0gQXJyYXkuZnJvbShhbGxCb2FyZEJsb2Nrc1tyYW5kb21Hb10uY2xhc3NMaXN0KTtcbiAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMuZmlsdGVyKChjbGFzc05hbWUpID0+IGNsYXNzTmFtZSAhPSBcImJsb2NrXCIpO1xuICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5maWx0ZXIoKGNsYXNzTmFtZSkgPT4gY2xhc3NOYW1lICE9IFwiYm9vbVwiKTtcbiAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMuZmlsdGVyKChjbGFzc05hbWUpID0+IGNsYXNzTmFtZSAhPSBcInRha2VuXCIpO1xuICAgICAgICBjb21wdXRlckhpdHMucHVzaCguLi5jbGFzc2VzKTtcblxuICAgICAgICBjaGVja1Njb3JlKFwiY29tcHV0ZXJcIiwgY29tcHV0ZXJIaXRzLCBjb21wdXRlclN1bmtTaGlwcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmZvRGlzcGxheS50ZXh0Q29udGVudCA9IFwiVGhlIGNvbXB1dGVyIE1JU1NFRCFcIjtcbiAgICAgICAgYWxsQm9hcmRCbG9ja3NbcmFuZG9tR29dLmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xuICAgICAgfVxuICAgIH0sIDIwMDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBwbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgIHR1cm5EaXNwbGF5LnRleHRDb250ZW50ID0gXCJQTEFZRVIncyB0dXJuXCI7XG4gICAgICBpbmZvRGlzcGxheS50ZXh0Q29udGVudCA9IFwiWW91IGFyZSBhdHRhY2tpbmcuLi4uXCI7XG5cbiAgICAgIGNvbnN0IGFsbEJvYXJkQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNjb21wdXRlciBkaXZcIik7XG4gICAgICBhbGxCb2FyZEJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT5cbiAgICAgICAgYmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrKVxuICAgICAgKTtcbiAgICB9LCA0MDAwKTtcbiAgfVxufVxuXG5jb25zdCBwbGF5ZXJTaGlwc0luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1zaGlwcy1pbmZvXCIpO1xuY29uc3QgY3B1U2hpcEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNwdS1zaGlwcy1pbmZvXCIpO1xuXG5sZXQgcHN1bmsgPSBbXCJEZXN0cm95ZXJcIiwgXCJTdWJtYXJpbmVcIiwgXCJDcnVpc2VyXCIsIFwiQmF0dGxlc2hpcFwiLCBcIkNhcnJpZXJcIl07XG5sZXQgY3N1bmsgPSBbXCJEZXN0cm95ZXJcIiwgXCJTdWJtYXJpbmVcIiwgXCJDcnVpc2VyXCIsIFwiQmF0dGxlc2hpcFwiLCBcIkNhcnJpZXJcIl07XG5cbmZ1bmN0aW9uIGNoZWNrU2NvcmUodXNlciwgdXNlckhpdHMsIHVzZXJTdW5rU2hpcHMpIHtcbiAgZnVuY3Rpb24gY2hlY2tTaGlwKHNoaXBOYW1lLCBzaGlwTGVuZ3RoKSB7XG4gICAgaWYgKFxuICAgICAgdXNlckhpdHMuZmlsdGVyKChzdG9yZWRTaGlwTmFtZSkgPT4gc3RvcmVkU2hpcE5hbWUgPT09IHNoaXBOYW1lKVxuICAgICAgICAubGVuZ3RoID09PSBzaGlwTGVuZ3RoXG4gICAgKSB7XG4gICAgICBpZiAodXNlciA9PT0gXCJwbGF5ZXJcIikge1xuICAgICAgICBpbmZvRGlzcGxheS50ZXh0Q29udGVudCA9IGBUaGUgcGxheWVyIFNVTksgdGhlIGNvbXB1dGVyJ3MgJHtzaGlwTmFtZS50b1VwcGVyQ2FzZSgpfSFgO1xuXG4gICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBzdW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHBzdW5rW2ldICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChwc3Vua1tpXS50b1VwcGVyQ2FzZSgpID09PSBzaGlwTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgZGVsZXRlIHBzdW5rW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgIHRleHQgKz0gcHN1bmtbaV0gKyBcIiB8IFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNwdVNoaXBJbmZvLnRleHRDb250ZW50ID0gXCJDb21wdXRlciBzaGlwczogXCIgKyB0ZXh0O1xuXG4gICAgICAgIHBsYXllckhpdHMgPSB1c2VySGl0cy5maWx0ZXIoXG4gICAgICAgICAgKHN0b3JlZFNoaXBOYW1lKSA9PiBzdG9yZWRTaGlwTmFtZSAhPT0gc2hpcE5hbWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyID09PSBcImNvbXB1dGVyXCIpIHtcbiAgICAgICAgaW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBgVGhlIGNvbXB1dGVyIFNVTksgdGhlIHBsYXllcidzICR7c2hpcE5hbWUudG9VcHBlckNhc2UoKX0hYDtcblxuICAgICAgICBsZXQgY3RleHQgPSBcIlwiO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3N1bmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoY3N1bmtbaV0gIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGNzdW5rW2ldLnRvVXBwZXJDYXNlKCkgPT09IHNoaXBOYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBkZWxldGUgY3N1bmtbaV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgY3RleHQgKz0gY3N1bmtbaV0gKyBcIiB8IFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBsYXllclNoaXBzSW5mby50ZXh0Q29udGVudCA9IFwiUGxheWVyIHNoaXBzOiBcIiArIGN0ZXh0O1xuXG4gICAgICAgIGNvbXB1dGVySGl0cyA9IHVzZXJIaXRzLmZpbHRlcihcbiAgICAgICAgICAoc3RvcmVkU2hpcE5hbWUpID0+IHN0b3JlZFNoaXBOYW1lICE9PSBzaGlwTmFtZVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB1c2VyU3Vua1NoaXBzLnB1c2goc2hpcE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrU2hpcChcImRlc3Ryb3llclwiLCAyKTtcbiAgY2hlY2tTaGlwKFwic3VibWFyaW5lXCIsIDMpO1xuICBjaGVja1NoaXAoXCJjcnVpc2VyXCIsIDMpO1xuICBjaGVja1NoaXAoXCJiYXR0bGVzaGlwXCIsIDQpO1xuICBjaGVja1NoaXAoXCJjYXJyaWVyXCIsIDUpO1xuXG4gIGNvbnNvbGUubG9nKFwicGxheWVyIHN1bmtlZCBzaGlwcyBcIiArIHBsYXllclN1bmtTaGlwcyk7XG4gIGNvbnNvbGUubG9nKFwiY3B1IHN1bmtlZCBzaGlwcyBcIiArIGNvbXB1dGVyU3Vua1NoaXBzKTtcblxuICBpZiAocGxheWVyU3Vua1NoaXBzLmxlbmd0aCA9PT0gNSkge1xuICAgIGluZm9EaXNwbGF5LnRleHRDb250ZW50ID1cbiAgICAgIFwiWW91IGhhdmUgc3VuayBhbGwgdGhlIGNvbXB1dGVyJ3Mgc2hpcC4gWW91IFdPTiEhXCI7XG4gICAgZ2FtZU92ZXIgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNvbXB1dGVyU3Vua1NoaXBzLmxlbmd0aCA9PT0gNSkge1xuICAgIGluZm9EaXNwbGF5LnRleHRDb250ZW50ID1cbiAgICAgIFwiQ29tcHV0ZXIgaGFzIHN1bmsgYWxsIHRoZSBwbGF5ZXIncyBzaGlwLiBZb3UgTE9TRSEhXCI7XG4gICAgZ2FtZU92ZXIgPSB0cnVlO1xuICB9XG59XG5cbmluZm9EaXNwbGF5LnRleHRDb250ZW50ID0gXCJQbGVhc2UgcGxhY2UgYWxsIHlvdXIgc2hpcHMgb24gdGhlIFBMQVlFUiBib2FyZC5cIjtcblxuIl0sIm5hbWVzIjpbImdhbWVzQm9hcmRDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aWR0aCIsImNyZWF0ZUJvYXJkIiwiY29sb3IiLCJ1c2VyIiwibmFtZSIsImJvYXJkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImJvYXJkVGl0bGUiLCJ0aXRsZSIsInRleHRDb250ZW50IiwiZ2FtZUJvYXJkQ29udGFpbmVyIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJpZCIsImkiLCJibG9jayIsImFwcGVuZCIsImdldFZhbGlkaXR5IiwiYWxsQm9hcmRCbG9ja3MiLCJpc0hvcml6b250YWwiLCJzdGFydEluZGV4Iiwic2hpcCIsInZhbGlkIiwidmFsaWRTdGFydEluZGV4IiwibGVuZ3RoIiwic2hpcEJsb2NrcyIsInB1c2giLCJOdW1iZXIiLCJldmVyeSIsIl9zaGlwQmxvY2siLCJpbmRleCIsIm5vdFRha2VuIiwic2hpcEJsb2NrIiwiY29udGFpbnMiLCJpc1NoaXBEcm9wcHBlZCIsImRyb3BwZWRTaGlwcyIsImNoZWNrU2hpcCIsIm5vdEFkZCIsImZvckVhY2giLCJkcm9wc2hpcCIsIm9wdGlvbkNvbnRhaW5lciIsImZsaXBCdXR0b24iLCJzdGFydEJ1dHRvbiIsImluZm9EaXNwbGF5IiwidHVybkRpc3BsYXkiLCJzZXR1cERpc3BsYXkiLCJkcm9wcGVkIiwiYW5nbGUiLCJhZGRFdmVudExpc3RlbmVyIiwib3B0aW9uU2hpcHMiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsIm9wdGlvblNoaXAiLCJ0cmFuc2Zvcm0iLCJTaGlwIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwic2hpcHMiLCJub3REcm9wcGVkIiwiZHJhZ2dlZFNoaXAiLCJhZGRTaGlwUGllY2UiLCJzdGFydElkIiwiY29uc29sZSIsImxvZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyYW5kb21Cb29sZWFuIiwiTWF0aCIsInJhbmRvbSIsInJhbmRvbVN0YXJ0SW5kZXgiLCJmbG9vciIsImRyYWdTdGFydCIsImUiLCJ0YXJnZXQiLCJkcmFnT3ZlciIsInByZXZlbnREZWZhdWx0IiwiYWxsUGxheWVyQmxvY2tzIiwic2V0VGltZW91dCIsInJlbW92ZSIsImhpZ2hsaWdodEFyZWEiLCJkcm9wU2hpcCIsInBsYXllckJsb2NrIiwicGxheWVyVHVybiIsImdhbWVPdmVyIiwidW5kZWZpbmVkIiwiZGlzcGxheSIsInBsYXllclNoaXBzSW5mbyIsImNwdVNoaXBJbmZvIiwiaGFuZGxlQ2xpY2siLCJwbGF5ZXJIaXRzIiwiY29tcHV0ZXJIaXRzIiwicGxheWVyU3Vua1NoaXBzIiwiY29tcHV0ZXJTdW5rU2hpcHMiLCJjbGFzc2VzIiwiZmlsdGVyIiwiY2xhc3NOYW1lIiwiY2hlY2tTY29yZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21wdXRlckdvIiwicmFuZG9tR28iLCJwc3VuayIsImNzdW5rIiwidXNlckhpdHMiLCJ1c2VyU3Vua1NoaXBzIiwic2hpcE5hbWUiLCJzaGlwTGVuZ3RoIiwic3RvcmVkU2hpcE5hbWUiLCJ0b1VwcGVyQ2FzZSIsInRleHQiLCJmb3VuZCIsImN0ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==